# pixAV environment variables
# Copy to .env and adjust for your setup

# PostgreSQL
PIXAV_DB_HOST=localhost
PIXAV_DB_PORT=5432
PIXAV_DB_USER=pixav
PIXAV_DB_PASSWORD=pixav
PIXAV_DB_NAME=pixav
PIXAV_POSTGRES_PORT=5432

# Redis
PIXAV_REDIS_URL=redis://localhost:6379/0
PIXAV_REDIS_PORT=6379
PIXAV_SYSTEM_PAUSE_KEY=system:pause

# qBittorrent
PIXAV_QBIT_PORT=8085
PIXAV_QBIT_URL=http://localhost:8085
PIXAV_QBIT_USER=admin
PIXAV_QBIT_PASSWORD=adminadmin

# Media-Loader
# full: real download + remux
# verify: qBit connectivity + placeholder file + route-to-upload
PIXAV_MEDIA_LOADER_MODE=full

# Optional embeddings (very heavy deps: sentence-transformers/torch)
PIXAV_EMBEDDINGS_ENABLED=0

# Redroid
PIXAV_REDROID_IMAGE=redroid/redroid:14.0.0-latest
PIXAV_REDROID_NETWORK=bridge
PIXAV_REDROID_ADB_HOST=127.0.0.1
PIXAV_REDROID_ADB_PORT_START=5555

# Pixel-Injector
# redroid: spawn Redroid + ADB + UI automation (Google Photos)
# local: mark upload complete and emit a synthetic share_url (for local resolver testing)
PIXAV_PIXEL_INJECTOR_MODE=redroid
PIXAV_PIXEL_INJECTOR_LOCAL_SHARE_SCHEME=pixav-local://

# Strm-Resolver
PIXAV_RESOLVER_HOST=0.0.0.0
PIXAV_RESOLVER_PORT=8000

# Migration DSN (used by scripts/migrate.py)
PIXAV_DSN=postgresql://pixav:pixav@localhost:5432/pixav

# Queue names
PIXAV_QUEUE_CRAWL=pixav:crawl
PIXAV_QUEUE_DOWNLOAD=pixav:download
PIXAV_QUEUE_DOWNLOAD_DLQ=pixav:download:dlq
PIXAV_QUEUE_UPLOAD=pixav:upload
PIXAV_QUEUE_UPLOAD_DLQ=pixav:upload:dlq
PIXAV_QUEUE_VERIFY=pixav:verify

# Retry
PIXAV_DOWNLOAD_MAX_RETRIES=10
PIXAV_UPLOAD_MAX_RETRIES=10
PIXAV_UPLOAD_DLQ_REPLAY_MAX=3
PIXAV_UPLOAD_DLQ_REPLAY_BACKOFF_SECONDS=60,300,900

# Upload execution controls
PIXAV_UPLOAD_MAX_CONCURRENCY=1
PIXAV_UPLOAD_LOCK_KEY=pixav:upload:lock
PIXAV_UPLOAD_LOCK_TTL_SECONDS=7200
PIXAV_UPLOAD_TASK_TIMEOUT_SECONDS=3600
PIXAV_UPLOAD_READY_TIMEOUT_SECONDS=120
PIXAV_UPLOAD_VERIFY_TIMEOUT_SECONDS=300

# Scheduling policy
PIXAV_NO_ACCOUNT_POLICY=wait

# Crawl seeds (comma-separated)
PIXAV_CRAWL_SEED_URLS=
PIXAV_CRAWL_LINK_FILTER_PATTERN=(viewthread|thread)
PIXAV_CRAWL_QUERIES=
PIXAV_CRAWL_MAX_PAGES=50
PIXAV_CRAWL_INTERVAL_SECONDS=3600
PIXAV_CRAWL_COOKIE_HEADER=
PIXAV_CRAWL_COOKIE_FILE=

# Crawling integrations
PIXAV_FLARESOLVERR_URL=http://localhost:8191
PIXAV_JACKETT_URL=http://localhost:9117
PIXAV_JACKETT_API_KEY=

# E2E scripts (optional)
# Provide a magnet to avoid live crawling:
PIXAV_E2E_MAGNET_URI=
# Or crawl a seed URL:
PIXAV_E2E_SEED_URL=
PIXAV_E2E_LINK_PATTERN=
PIXAV_E2E_CRAWL_MAX_PAGES=10
